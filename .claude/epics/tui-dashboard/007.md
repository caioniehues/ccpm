---
id: "007"
name: Implement main dashboard view
status: completed
created: 2025-12-23T19:45:00Z
updated: 2025-12-23T20:15:00Z
depends_on: ["006"]
parallel: true
conflicts_with: []
effort: M
---

# Task: Implement Main Dashboard View

## Description

Implement the main dashboard view (Wireframe #1) that serves as the primary screen. This view shows the active epic card, task list, activity log, and navigation footer.

## Acceptance Criteria

- [ ] Dashboard displays CCPM ASCII logo header
- [ ] Active epic card shows current epic with progress
- [ ] Task list shows all tasks with status icons
- [ ] Activity log shows recent events with timestamps
- [ ] Footer shows keybindings
- [ ] Keyboard navigation works (j/k for task selection)
- [ ] Branch name displayed in header
- [ ] Empty state shown when no epics exist

## File to Create

### internal/tui/views/dashboard.go

```go
package views

import (
    "github.com/charmbracelet/lipgloss"
    "github.com/automazeio/ccpm/internal/tui/components"
)

func (m Model) viewDashboard() string {
    // Calculate layout dimensions
    headerHeight := 8
    footerHeight := 2
    contentHeight := m.Height - headerHeight - footerHeight
    
    epicCardHeight := 12
    taskListHeight := contentHeight - epicCardHeight - 8
    activityHeight := 6
    
    // Check for empty state
    if len(m.Epics) == 0 {
        return m.viewEmptyState()
    }
    
    // Build sections
    header := m.renderDashboardHeader()
    epicCard := m.renderEpicCard()
    taskList := m.renderTaskList(taskListHeight)
    activity := m.renderActivityLog(activityHeight)
    footer := m.renderFooter()
    
    // Compose layout
    content := lipgloss.JoinVertical(
        lipgloss.Left,
        header,
        epicCard,
        taskList,
        activity,
        footer,
    )
    
    return AppFrame.Width(m.Width).Height(m.Height).Render(content)
}

func (m Model) renderDashboardHeader() string {
    logo := `
██████╗  ██████╗ ██████╗ ███╗   ███╗
██╔════╝██╔════╝ ██╔══██╗████╗ ████║
██║     ██║      ██████╔╝██╔████╔██║
██║     ██║      ██╔═══╝ ██║╚██╔╝██║
╚██████╗╚██████╗ ██║     ██║ ╚═╝ ██║
 ╚═════╝ ╚═════╝ ╚═╝     ╚═╝     ╚═╝`
    
    branch := MutedStyle.Render("Branch: " + m.getCurrentBranch())
    
    return lipgloss.JoinHorizontal(
        lipgloss.Top,
        AccentStyle.Render(logo),
        "    ",
        branch,
    )
}

func (m Model) renderEpicCard() string {
    if m.ActiveEpic == nil {
        return ""
    }
    
    card := components.EpicCard{
        Name:         m.ActiveEpic.Name,
        Description:  m.ActiveEpic.Description,
        Progress:     m.ActiveEpic.Progress,
        TasksDone:    m.ActiveEpic.DoneCount,
        TasksTotal:   m.ActiveEpic.TaskCount,
        PRDApproved:  m.ActiveEpic.Status == "approved",
        EpicApproved: true,
        TasksReady:   true,
        Synced:       false,
        Width:        m.Width - 4,
    }
    
    return card.View()
}

func (m Model) renderTaskList(height int) string {
    title := LabelStyle.Render("TASKS")
    nav := MutedStyle.Render("[j/k nav]")
    header := lipgloss.JoinHorizontal(lipgloss.Top, title, "  ", nav)
    
    list := m.TaskList.View()
    
    content := lipgloss.JoinVertical(lipgloss.Left, header, list)
    return SubtleCard.Width(m.Width - 4).Height(height).Render(content)
}

func (m Model) renderActivityLog(height int) string {
    log := components.NewActivityLog(m.Width - 4, height)
    log.SetEntries(m.ActivityLog)
    return log.View()
}

func (m Model) renderFooter() string {
    keys := []string{
        HelpKeyStyle.Render("[e]") + HelpDescStyle.Render("pic"),
        HelpKeyStyle.Render("[t]") + HelpDescStyle.Render("ask"),
        HelpKeyStyle.Render("[p]") + HelpDescStyle.Render("rd"),
        HelpKeyStyle.Render("[w]") + HelpDescStyle.Render("izard"),
        HelpKeyStyle.Render("[s]") + HelpDescStyle.Render("ync"),
        HelpKeyStyle.Render("[?]") + HelpDescStyle.Render("help"),
        HelpKeyStyle.Render("[q]") + HelpDescStyle.Render("uit"),
    }
    
    return StatusBar.Render(strings.Join(keys, "  "))
}

func (m Model) viewEmptyState() string {
    // Wireframe #10 - Empty state
    message := `
╭───────────────────────╮
│                       │
│    ◇ No epics yet     │
│                       │
│    Start by creating  │
│    your first PRD     │
│                       │
│    Press [w] to       │
│    launch the wizard  │
│                       │
╰───────────────────────╯`
    
    centered := lipgloss.Place(
        m.Width, m.Height,
        lipgloss.Center, lipgloss.Center,
        MutedStyle.Render(message),
    )
    
    return centered
}
```

## Design Reference

- Main Dashboard: TUI-WIREFRAMES.md lines 296-352 (Wireframe #1)
- Empty State: TUI-WIREFRAMES.md lines 720-758 (Wireframe #10)

## Definition of Done

- Dashboard renders all sections correctly
- Task list is navigable with j/k keys
- Empty state shows when no epics
- Layout adapts to terminal size
- All styling matches design spec
