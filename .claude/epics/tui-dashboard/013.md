---
id: "013"
name: Create local tracking commands
status: pending
created: 2025-12-23T19:45:00Z
updated: 2025-12-23T19:45:00Z
depends_on: ["011"]
parallel: true
conflicts_with: []
effort: M
---

# Task: Create Local Tracking Commands

## Description

Create new slash commands that enable GitHub-optional workflows. These commands allow tracking task status locally without requiring GitHub sync.

## Acceptance Criteria

- [ ] `/pm:task-start-local {epic} {task}` starts a task locally
- [ ] `/pm:task-complete-local {epic} {task}` marks task complete locally
- [ ] `/pm:sync-when-ready {epic}` batch syncs local changes to GitHub
- [ ] `/pm:steering-setup` creates steering documents
- [ ] All commands update frontmatter correctly
- [ ] Status transitions: pending → in-progress → completed
- [ ] Timestamps recorded for started_at and completed_at

## Files to Create

### ccpm/commands/pm/task-start-local.md

```yaml
---
description: Start working on a task locally (no GitHub required)
argument-hint: <epic-name> <task-id>
allowed-tools:
  - Read
  - Write
  - Edit
  - Bash
---
```

```xml
<objective>
Start working on a task in local-only mode without requiring GitHub sync.
Updates the task's status to "in-progress" and records the start time.
</objective>

<process>
1. Parse arguments to get epic name and task ID
2. Read task file from .claude/epics/{epic}/{task}.md
3. Update frontmatter:
   - Set status: in-progress
   - Set started_at: current ISO timestamp
4. Create working branch if not exists: task/{epic}-{task}
5. Output task context for starting work

Example frontmatter update:
```yaml
---
status: in-progress
started_at: 2025-12-23T14:30:00Z
---
```
</process>

<success_criteria>
- Task file updated with in-progress status
- started_at timestamp recorded
- Working branch created (optional)
- Task context displayed for work
</success_criteria>
```

### ccpm/commands/pm/task-complete-local.md

```yaml
---
description: Mark a task complete locally
argument-hint: <epic-name> <task-id>
allowed-tools:
  - Read
  - Write
  - Edit
---
```

```xml
<objective>
Mark a task as complete in local-only mode. Updates status and records completion time.
</objective>

<process>
1. Parse arguments to get epic name and task ID
2. Read task file from .claude/epics/{epic}/{task}.md
3. Update frontmatter:
   - Set status: completed
   - Set completed_at: current ISO timestamp
4. Update epic progress (recalculate from tasks)
5. Report completion and suggest next task

Example frontmatter update:
```yaml
---
status: completed
completed_at: 2025-12-23T16:45:00Z
---
```
</process>

<success_criteria>
- Task file updated with completed status
- completed_at timestamp recorded
- Epic progress updated
- Next task suggested
</success_criteria>
```

### ccpm/commands/pm/sync-when-ready.md

```yaml
---
description: Batch sync all local changes to GitHub
argument-hint: <epic-name>
allowed-tools:
  - Read
  - Bash
  - Task
---
```

```xml
<objective>
Sync all local epic and task changes to GitHub in a single batch operation.
Creates or updates GitHub issues for each task.
</objective>

<process>
1. Read epic and all tasks from .claude/epics/{epic}/
2. Identify tasks without github_issue field (not yet synced)
3. For each unsynced task:
   - Create GitHub issue using gh cli
   - Update task frontmatter with github_issue number
4. For tasks with status changes:
   - Update GitHub issue status via gh cli
5. Report sync summary

Sync logic:
- New tasks → Create issues
- Completed tasks → Close issues
- In-progress tasks → Add progress comment
</process>

<success_criteria>
- All tasks synced to GitHub
- Task files updated with issue numbers
- GitHub issues reflect current status
- Sync summary displayed
</success_criteria>
```

### ccpm/commands/pm/steering-setup.md

```yaml
---
description: Initialize steering documents for the project
allowed-tools:
  - Read
  - Write
  - Bash
---
```

```xml
<objective>
Create the steering documents directory and initial templates that provide
consistent project context across all CCPM commands.
</objective>

<process>
1. Create .claude/steering/ directory
2. Create product.md template:
   - Vision section
   - Target users section
   - Core features section
   - Non-goals section

3. Create tech.md template:
   - Stack section
   - Standards section
   - Dependencies section

4. Create structure.md template:
   - Directory layout section
   - File naming section
   - Module organization section

5. Guide user through filling out each document
</process>

<success_criteria>
- .claude/steering/ directory created
- product.md, tech.md, structure.md templates created
- User guided through initial content
</success_criteria>
```

## Frontmatter Updates

### Task Status Flow
```
pending → in-progress → completed
                     → blocked (optional)
```

### New Frontmatter Fields
```yaml
---
status: pending        # pending | in-progress | completed | blocked
started_at: null       # ISO timestamp when started
completed_at: null     # ISO timestamp when completed
github_issue: null     # Issue number after sync
blocked_by: null       # Reference to blocking task
---
```

## Definition of Done

- All 4 commands created with proper YAML/XML structure
- Local status tracking works without GitHub
- Frontmatter updates correctly on each command
- Sync command creates/updates GitHub issues
- Steering documents template created
